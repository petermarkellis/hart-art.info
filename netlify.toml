[build]
  publish = "public"
  command = "npm run sync-dates && hugo --minify"

[build.environment]
  HUGO_VERSION = "0.128.0"
  NODE_VERSION = "20"

[dev]
  command = "hugo server"
  publish = "public"

# Serve admin folder as static files (highest priority)
# These redirects ensure /admin routes to the CMS interface
[[redirects]]
  from = "/admin"
  to = "/admin/index.html"
  status = 200
  force = true

[[redirects]]
  from = "/admin/*"
  to = "/admin/index.html"
  status = 200
  force = true

