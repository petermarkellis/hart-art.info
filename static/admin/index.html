<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex" />
  <title>Content Manager</title>
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <!-- Google Fonts - Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* White background for admin page */
    html, body {
      background-color: white !important;
    }
    
    /* Hide Decap/Netlify logo */
    .nc-logo,
    [class*="nc-logo"],
    [class*="logo"],
    [class*="Logo"],
    .netlify-identity-widget .logo,
    img[src*="decap"],
    img[src*="netlify"],
    img[alt*="Decap"],
    img[alt*="Netlify"],
    img[alt*="CMS"] {
      display: none !important;
    }
    
    /* Custom logo container */
    #custom-cms-logo {
      display: block !important;
    }
    
    /* Style Netlify Identity login button */
    .netlify-identity-button,
    .netlify-identity-widget button,
    button[data-netlify-identity-button],
    .netlify-identity-widget a,
    a[data-netlify-identity-button] {
      background-color: #1a1a1a !important;
      color: white !important;
      border: none !important;
      border-radius: 0 !important;
      padding: 16px 32px !important;
      font-size: 16px !important;
      font-weight: 500 !important;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
      letter-spacing: 0.05em !important;
      text-transform: uppercase !important;
      cursor: pointer !important;
      transition: background-color 0.2s !important;
    }
    
    .netlify-identity-button:hover,
    .netlify-identity-widget button:hover,
    button[data-netlify-identity-button]:hover,
    .netlify-identity-widget a:hover,
    a[data-netlify-identity-button]:hover {
      background-color: #000000 !important;
    }
    
    /* Add text above login button */
    .netlify-identity-widget::before,
    .netlify-identity-button::before,
    button[data-netlify-identity-button]::before {
      content: 'Login to Mark Hartzheim Art CMS';
      display: block;
      text-align: center;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      font-size: 14px;
      font-weight: 400;
      color: #1a1a1a;
      letter-spacing: 0.05em;
      margin-bottom: 16px;
    }
    
    /* Apply Inter font to CMS preview - target all possible selectors */
    .nc-previewPane-frameBody,
    .nc-previewPane-frameBody *,
    .nc-previewPane-frameBody body,
    .nc-previewPane-frameBody p,
    .nc-previewPane-frameBody h1,
    .nc-previewPane-frameBody h2,
    .nc-previewPane-frameBody h3,
    .nc-previewPane-frameBody h4,
    .nc-previewPane-frameBody h5,
    .nc-previewPane-frameBody h6,
    .nc-previewPane-frameBody div,
    .nc-previewPane-frameBody span,
    .nc-previewPane-frameBody a,
    .nc-previewPane-frameBody li,
    .nc-previewPane-frameBody td,
    .nc-previewPane-frameBody th,
    iframe.nc-previewPane-frame,
    iframe[class*="preview"] {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
    }
  </style>
</head>
<body>
  <!-- Custom Logo -->
  <div id="custom-cms-logo" style="position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 10000; text-align: center;">
    <img src="/web-app-manifest-192x192.png" alt="Hart Art" style="width: 120px; height: 120px; display: block; margin: 0 auto;">
  </div>
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  <script>
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", user => {
        if (!user) {
          window.netlifyIdentity.on("login", () => {
            document.location.href = "/admin/";
          });
        }
      });
    }
    
    // Style Netlify Identity button dynamically and add text
    function styleLoginButton() {
      const buttons = document.querySelectorAll('.netlify-identity-button, .netlify-identity-widget button, button[data-netlify-identity-button], .netlify-identity-widget a, a[data-netlify-identity-button]');
      buttons.forEach(function(button) {
        button.style.backgroundColor = '#1a1a1a';
        button.style.color = 'white';
        button.style.border = 'none';
        button.style.borderRadius = '0';
        button.style.padding = '16px 32px';
        button.style.fontSize = '16px';
        button.style.fontWeight = '500';
        button.style.fontFamily = "'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif";
        button.style.letterSpacing = '0.05em';
        button.style.textTransform = 'uppercase';
        button.style.cursor = 'pointer';
        button.style.transition = 'background-color 0.2s';
        
        // Add text above button if not already present
        const parent = button.parentElement;
        if (parent && !parent.querySelector('.cms-login-text')) {
          const loginText = document.createElement('div');
          loginText.className = 'cms-login-text';
          loginText.textContent = 'Login to Mark Hartzheim Art CMS';
          loginText.style.cssText = 'text-align: center; font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; font-size: 14px; font-weight: 400; color: #1a1a1a; letter-spacing: 0.05em; margin-bottom: 16px; display: block;';
          parent.insertBefore(loginText, button);
        }
      });
      
      // Also check for widget container
      const widget = document.querySelector('.netlify-identity-widget');
      if (widget && !widget.querySelector('.cms-login-text')) {
        const loginText = document.createElement('div');
        loginText.className = 'cms-login-text';
        loginText.textContent = 'Login to Mark Hartzheim Art CMS';
        loginText.style.cssText = 'text-align: center; font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; font-size: 14px; font-weight: 400; color: #1a1a1a; letter-spacing: 0.05em; margin-bottom: 16px; display: block;';
        const firstButton = widget.querySelector('button, a');
        if (firstButton) {
          widget.insertBefore(loginText, firstButton);
        } else {
          widget.insertBefore(loginText, widget.firstChild);
        }
      }
    }
    
    // Replace logo dynamically when CMS loads
    function replaceLogo() {
      // Find and replace any logo images
      const logoImages = document.querySelectorAll('img[src*="decap"], img[src*="netlify"], img[alt*="Decap"], img[alt*="Netlify"], img[alt*="CMS"]');
      logoImages.forEach(function(img) {
        img.src = '/web-app-manifest-192x192.png';
        img.alt = 'Hart Art';
        img.style.display = 'block';
        img.style.width = '120px';
        img.style.height = '120px';
        img.style.margin = '20px auto';
      });
      
      // Also try to find logo containers and replace
      const logoContainers = document.querySelectorAll('[class*="logo"], [class*="Logo"]');
      logoContainers.forEach(function(container) {
        if (container.querySelector('img')) {
          const img = container.querySelector('img');
          img.src = '/web-app-manifest-192x192.png';
          img.alt = 'Hart Art';
          img.style.width = '120px';
          img.style.height = '120px';
        } else {
          container.innerHTML = '<img src="/web-app-manifest-192x192.png" alt="Hart Art" style="width: 120px; height: 120px; display: block; margin: 20px auto;">';
        }
      });
      
      // Ensure custom logo is visible
      const customLogo = document.getElementById('custom-cms-logo');
      if (customLogo) {
        customLogo.style.display = 'block';
      }
    }
    
    // Run immediately and on various events
    document.addEventListener('DOMContentLoaded', function() {
      replaceLogo();
      styleLoginButton();
    });
    window.addEventListener('load', function() {
      setTimeout(function() {
        replaceLogo();
        styleLoginButton();
      }, 100);
      setTimeout(function() {
        replaceLogo();
        styleLoginButton();
      }, 500);
      setTimeout(function() {
        replaceLogo();
        styleLoginButton();
      }, 1000);
      setTimeout(function() {
        replaceLogo();
        styleLoginButton();
      }, 2000);
    });
    
    // Watch for DOM changes
    const observer = new MutationObserver(function(mutations) {
      replaceLogo();
      styleLoginButton();
    });
    
    observer.observe(document.body, {
      childList: true,
      subtree: true
    });
    
    // Additional script to ensure Inter font is applied to preview iframe after CMS loads
    document.addEventListener('DOMContentLoaded', function() {
      function applyInterFont() {
        // Find all preview iframes
        const previewFrames = document.querySelectorAll('iframe[class*="preview"], iframe.nc-previewPane-frame, iframe');
        
        previewFrames.forEach(function(iframe) {
          try {
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            if (iframeDoc) {
              // Add Inter font link to iframe if not already present
              if (!iframeDoc.querySelector('link[href*="fonts.googleapis.com/css2?family=Inter"]')) {
                const fontLink = iframeDoc.createElement('link');
                fontLink.rel = 'preconnect';
                fontLink.href = 'https://fonts.googleapis.com';
                iframeDoc.head.appendChild(fontLink);
                
                const fontLink2 = iframeDoc.createElement('link');
                fontLink2.rel = 'preconnect';
                fontLink2.href = 'https://fonts.gstatic.com';
                fontLink2.crossOrigin = 'anonymous';
                iframeDoc.head.appendChild(fontLink2);
                
                const fontLink3 = iframeDoc.createElement('link');
                fontLink3.href = 'https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap';
                fontLink3.rel = 'stylesheet';
                iframeDoc.head.appendChild(fontLink3);
              }
              
              // Apply Inter font to all elements in iframe
              const style = iframeDoc.createElement('style');
              style.textContent = `
                body, body *, p, h1, h2, h3, h4, h5, h6, div, span, a, li, td, th, 
                .nc-previewPane-frameBody, .nc-previewPane-frameBody * {
                  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
                }
              `;
              iframeDoc.head.appendChild(style);
            }
          } catch (e) {
            // Cross-origin iframe, can't access
            console.log('Cannot access iframe content:', e);
          }
        });
      }
      
      // Apply immediately and then periodically to catch dynamically loaded iframes
      applyInterFont();
      setTimeout(applyInterFont, 1000);
      setTimeout(applyInterFont, 2000);
      setTimeout(applyInterFont, 3000);
      
      // Also watch for new iframes being added
      const observer = new MutationObserver(function(mutations) {
        applyInterFont();
      });
      
      observer.observe(document.body, {
        childList: true,
        subtree: true
      });
    });
  </script>
</body>
</html>

